package ch17_gui.WindowBuilder;

import java.awt.Canvas;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.event.ComponentEvent;
import java.awt.event.ComponentListener;
import java.util.Random;
// Canvas : 그래픽 처리를 위한 컴포넌트
// Runnable : 멀티스레드 구현을 위한 인터페이스
// ComponentListener : 화면 사이즈 변경을 감지하기 위한 인터페이스
public class BallCanvas extends Canvas implements Runnable, ComponentListener{
	
	private int x, y;
	private int moveX = 2, moveY = 3;
	private int red, green, blue;
	private Random random;
	private int width, height;
	
	
	public BallCanvas() {
		// 화면 변경 사항을 감지하기 위한 리스너 추가
		addComponentListener(this);
		
		// 색상 변경 처리를 위한 랜덤 객체 생성
		random = new Random();
		
		// 좌표값 변경을 위한 백그라운드 스레드 생성
		Thread thread = new Thread(this);
		
		// 백그라운드 스레드 시작 요청
		thread.start(); // run()가 호출됨
		
	}
	
	public void paint(Graphics g) {
		// 색상 설정
		g.setColor(new Color(red, green, blue));
		
		// 타원그리기
		g.fillOval(x, y, 20, 20);
		
		
		
	}
	
	

	@Override
	public void componentResized(ComponentEvent e) {
		// 현재 실행 중인 화면의 가로, 세로 길이 계산
		width = getWidth();
		height = getHeight();
		
	}

	@Override
	public void componentMoved(ComponentEvent e) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void componentShown(ComponentEvent e) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void componentHidden(ComponentEvent e) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void run() {
		while(true) {
			if(x>(width-20) || x<0) { // 좌우 벽처리
				moveX =-moveY; // 증가, 감소 방향 설정
			}
			if(y>(height-20) || y<0) { // 상하 벽처리
				moveY =-moveX;
			}
			x += moveX; // x좌표값 변경
			y += moveY; // y좌표값 변경
			repaint(); // 그래픽 갱신 요청 --> paint() 가 실행됨
			try {
				Thread.sleep(30);
			} catch (InterruptedException e) {
				e.printStackTrace();
			}
		}
	}
}








